<?xml version="1.0"?>
<odoo>
    <data noupdate="1">
         <!-- Template for notifying the admin about a sheet confirmed with the wrong number of hours -->
        <record id="email_template_data_hours_mismatch" model="mail.template">
            <field name="name">Hours mismatch notification</field>
            <field name="subject">Hours mismatch notification</field>
            <field name="email_to">admin@exampledomain.com</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_employee_sheet"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear admin,</p>
                <p>Employee ${ctx.get('employee_name')} confirmed his timesheet (#${ctx.get('sheet_id').id}) with ${ctx.get('vars').form_hours} hours. This differs from ${ctx.get('vars').contract_hours} hours on the employees contract.<br />
                </p>]]>
            </field>
        </record>
        <!-- Template for notifying employees filling in timesheets -->
        <record id="email_template_data_timesheet_reminder" model="mail.template">
            <field name="name">Employee timesheet notification reminder</field>
            <field name="subject">Reminder to fill in timesheet</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_employee_sheet"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear ${ctx.get('employee').name or 'employee'},</p><br />
                <p>Please fill in your timesheet from ${ctx.get('sheet').startdate} to ${ctx.get('sheet').enddate}.<br />
                </p>]]>
            </field>
        </record>
        <!-- Template for notifying the customers about the approval -->
        <record id="email_template_data_approval_reminder" model="mail.template">
            <field name="name">Customer approval notification reminder</field>
            <field name="subject">Reminder to approve timesheet</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_employee_sheet"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear ${name or 'customer'},</p>
                <p>It has been some time since employee ${ctx.get('employee_name')} confirmed his timesheet for period ${ctx.get('sheet_id').startdate}. Please have a <a href="/timesheet/${ctx.get('sheet_id').id}/${ctx.get('token')}">look</a> and take action.<br />
                 Should you have changed position and are now not responsible for approving these timesheets please be so kind to inform your purchasing team or our offices at email adress</p>
                 <br />
                 <p>Sincerely,</p>
                 <br />
                 <p>${user.signature | safe}</p>]]>
            </field>
        </record>
        <!-- Template for notifying the customers about the approval -->
        <record id="email_template_data_approval" model="mail.template">
            <field name="name">Customer approval notification</field>
            <field name="subject">You have a new timesheet to approve</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="email_from">administrator@gearboks.nl</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_employee_sheet"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear ${name or 'customer'},</p>
                <p>Employee ${ctx.get('employee_name')} confirmed his timesheet for period ${ctx.get('sheet_id').startdate}. Please have a <a href="/timesheet/${ctx.get('sheet_id').id}/${ctx.get('token')}">look</a> and take action.<br />
                </p>]]>
            </field>
        </record>
        <!-- Template for notifying the customers about the approval -->
        <record id="email_template_data_approval2" model="mail.template">
            <field name="name">Customer approval notification backup approver</field>
            <field name="subject">You have a new timesheet to approve</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="email_from">administrator@gearboks.nl</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_employee_sheet"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear ${name or 'customer'},</p>
                <p>Employee ${ctx.get('employee_name')} confirmed his timesheet for period ${ctx.get('sheet_id').startdate}. Please have a <a href="/timesheet/${ctx.get('sheet_id').id}/${ctx.get('token')}">look</a> and take action.<br />
                </p>]]>
            </field>
        </record>
        <!-- Template for notifying about the rejection -->
        <record id="email_template_data_rejection" model="mail.template">
            <field name="name">Rejection notification</field>
            <field name="subject">A timesheet was rejected</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="email_from">administrator@gearboks.nl</field>
            <field name="email_cc">palczaszilard@gmail.com</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_employee_sheet"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear ${ctx.get('employee_name')},</p>
                <p>${name or 'customer'} rejected your timesheet for period ${ctx.get('sheet_id').startdate} to ${ctx.get('sheet_id').enddate}. Please have a <a href="/timesheet/${ctx.get('sheet_id').id}/${ctx.get('token')}">look</a> and take action.<br /><br />
                Reject reason:</p><p>${ctx.get('reject_reason')}</p>]]>
            </field>
        </record>
        <record id="email_template_budget_threshold" model="mail.template">
            <field name="name">Budget Threshold Notification</field>
            <field name="subject">Budget > 80% invoiced</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_sale_order"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear,</p>
                 <p>The following Sale Order ${ctx.get('sale_order').name} has reached the threshold of > 80% invoiced.</p>]]>
            </field>
        </record>
        <record id="email_template_holiday_stats" model="mail.template">
            <field name="name">Employee holiday statistics</field>
            <field name="subject">Employee holiday statistics</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_hr_leave_allocation"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear,</p>
                 <p>Attached you can find the holiday statistics with the reference date of today.</p>]]>
            </field>
        </record>
        <record id="email_template_expiring_holiday" model="mail.template">
            <field name="name">Expiring holiday</field>
            <field name="subject">Employee holiday expiring soon!</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="dws_dae_custom.model_hr_leave_allocation"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                 <p>Dear,</p>
                 <p>The holiday of employee ${ctx.get('employee_name')} will expire soon.</p>]]>
            </field>
        </record>
        <!-- Template for notifying about a change in user profile on portal -->
        <record id="email_template_portal_update_notify" model="mail.template">
            <field name="name">Portal user personal details edit notification</field>
            <field name="subject">User changed his personal details</field>
            <field name="email_to">${ctx.get('email_to')}</field>
            <field name="lang">${object.partner_id and object.partner_id.lang or ''}</field>
            <field name="model_id" ref="crm.model_res_partner"/>
            <!--field name="user_signature" eval="False"/-->
            <field name="body_html"><![CDATA[
                <p>Dear ,</p>
                <p>Employee <strong>${ctx.get('employee_name')}</strong> changed some detials on his personal account.</p>
                <br></br>
                <p>The new values are:</p>
                % for row in ctx.get('values'):
                 <p><span style="text-transform:capitalize;font-weight:bold;">${row}:</span> ${ctx.get('values')[row]}</p>
                %endfor
                ]]>
        </field>
        </record>
        <!-- portal user mail invitation -->
        <record id="mail_invitation" model="mail.template">
            <field name="name">Portal: new user invitation</field>
            <field name="model_id" ref="dws_dae_custom.model_hr_employee"/>
            <field name="email_to">${object.user_id.partner_id.email}</field>
            <field name="subject">Your Odoo account at ${object.user_id.company_id.name}</field>
            <field name="lang">${object.user_id.partner_id.lang}</field>
            <!--field name="user_signature" eval="True"/-->
            <field name="body_html"><![CDATA[
<div>
<p>
    Dear ${object.user_id.name or ''},
</p>
<p>
    You have been given access to ${object.user_id.company_id.name}'s Portal.
</p>
<p>
    Your login account data is:
</p>
<ul>
    <li>Username: ${object.user_id.login or ''}</li>
    <li>Portal: <a href="${'portal_url' in ctx and ctx['portal_url'] or ''}" data-original-title="" title="">${'portal_url' in ctx and ctx['portal_url'] or ''}</a></li>
</ul>
<p>
    You can set or change your password via the following url:
    <a href="${object.user_id.signup_url}">${object.user_id.signup_url}</a>
</p>
<p>
    <br>Best regards,
</p>
</div>
]]></field>
        </record>

    </data>
</odoo>
